body {
  font-family: Georgia, serif;
  background-color: #ffffff;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  color: black;<!DOCTYPE html>
 <html lang="de">
 <head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>German-Greek Flashcards</title>
   <script src="datasets.js"></script>
   <link rel="stylesheet" href="style.css" />
 </head>
 <body>
 <div id="control-bar">
   <select id="modeToggle" onchange="toggleMode()">
     <option value="typing">Tippen</option>
     <option value="self">Einsch√§tzen</option>
     <option value="overview">√úbersicht</option>
     <option value="lessons">Lektion</option>
   </select>
   <select id="datasetSelect" onchange="loadSelectedDataset()"></select>
 </div>
 
 
 
   <div id="flashcard">
     <div id="question">Lade Karte...</div>
    <input type="text" id="userInput" placeholder="Antwort eingeben..." autocomplete="off" />
 <p id="correctAnswer" style="display:none;"></p>
 <div id="phonetic"></div>
 <div class="feedback" id="feedback"></div>
 
     <div id="practiceContainer">
       <div id="practiceLabel">Zum Lernen hier die L√∂sung abtippen:</div>
       <textarea id="practiceTipField" placeholder="Tippe die L√∂sung ab..."></textarea>
     </div>
 
     <div id="selfAssessButtons">
       <button onclick="selfAssess('no')">‚ùå Nicht gewusst</button>
       <button onclick="selfAssess('yes')">‚úÖ Gewusst</button>
     </div>
 
     <div id="check-row">
       <button id="actionButton" onclick="handleAction()">Check</button>
       <div id="progress">Richtig: 0 / 21</div>
     </div>
   </div>
 
   <div id="bottom-buttons">
     <button onclick="toggleReverse()"><span class="icon-reverse"></span> Richtung</button>
     <button onclick="shuffleCards()"><span class="icon-shuffle"></span> Mischen</button>
     <button onclick="resetProgress()"><span class="icon-reset"></span> Zur√ºcksetzen</button>
   </div>
 
   <div id="overviewContent">
     <h2 id="overviewTitle">√úbersicht l√§dt...</h2>
     <div id="overviewCards"></div>
   </div>
 
   <div id="lessonsContent">
     <h2 id="lessonsTitle">Griechisch Lektionen</h2>
     <div id="lessonsContainer"></div>
   </div>
 
   <div id="version">German-Greek Flashcards / Version 2.7.1</div>
 
   <script>
     let allFlashcards = [], remainingFlashcards = [], currentCard = null;
     let correctAnswersSet = new Set(), currentDataset = "";
     let reverseMode = false, lastActionWasCheck = false;
     let mode = "typing";
     let lessons = []; // Variable f√ºr die Lektionen
 
     function renderPhonetic(text) {
       return text ? text.replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>") : "";
     }
 
     function toggleMode() {
       mode = document.getElementById("modeToggle").value;
       
       // Alle Modi ausblenden
       document.getElementById("flashcard").style.display = "none";
       document.getElementById("overviewContent").style.display = "none";
       document.getElementById("lessonsContent").style.display = "none";
       
       // Gew√§hlten Modus anzeigen
       if (mode === "overview") {
         document.getElementById("overviewContent").style.display = "block";
         showOverview();
       } else if (mode === "lessons") {
         document.getElementById("lessonsContent").style.display = "block";
         loadLessons(); // Lektionen laden
       } else {
         document.getElementById("flashcard").style.display = "flex";
         displayCard();
       }
     }
 
     function normalize(text) {
       let normalized = text.toLowerCase()
         .replace(/[.,!?;:()\[\]"'‚Äû"'¬´¬ª\-]/g, "")
         .replace(/\s+/g, "")
         .trim();
       
       normalized = normalized.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
       return normalized;
     }
 
     async function loadFlashcards(file) {
       const response = await fetch(file);
       allFlashcards = await response.json();
       resetSession();
       if (mode === "overview") {
         showOverview();
       }
     }
 
     // Laden der Lektionen aus der JSON-Datei
     async function loadLessons() {
       try {
         const response = await fetch('lessons.json');
         lessons = await response.json();
         renderLessons();
       } catch (error) {
         console.error("Fehler beim Laden der Lektionen:", error);
         document.getElementById("lessonsContainer").innerHTML = 
           "<p>Fehler beim Laden der Lektionen. Bitte √ºberpr√ºfe, ob die Datei 'lessons.json' verf√ºgbar ist.</p>";
       }
     }
 
     // Anzeigen der Lektionen
     function renderLessons() {
       const container = document.getElementById("lessonsContainer");
       container.innerHTML = "";
       
       lessons.forEach((lesson, index) => {
         const lessonDiv = document.createElement("div");
         lessonDiv.className = "lesson-item";
         
         const titleDiv = document.createElement("div");
         titleDiv.className = "lesson-title";
         titleDiv.textContent = lesson.title;
         titleDiv.onclick = function() {
           toggleLessonContent(index);
         };
         
         const contentDiv = document.createElement("div");
         contentDiv.className = "lesson-content";
         contentDiv.id = `lesson-content-${index}`;
         contentDiv.textContent = lesson.content;
         
         lessonDiv.appendChild(titleDiv);
         lessonDiv.appendChild(contentDiv);
         container.appendChild(lessonDiv);
       });
     }
 
     // Aufklappen/Zuklappen von Lektionsinhalten
     function toggleLessonContent(index) {
       const contentElement = document.getElementById(`lesson-content-${index}`);
       const titleElements = document.querySelectorAll('.lesson-title');
       const contentElements = document.querySelectorAll('.lesson-content');
       
       // Alle Lektionen schlie√üen
       contentElements.forEach(el => {
         el.style.display = "none";
       });
       
       titleElements.forEach(el => {
         el.classList.remove("active");
       });
       
       // Ausgew√§hlte Lektion √∂ffnen, wenn sie nicht die aktive war
       if (contentElement.style.display !== "block") {
         contentElement.style.display = "block";
         titleElements[index].classList.add("active");
       }
     }
 
     function resetSession() {
       remainingFlashcards = [...allFlashcards];
       correctAnswersSet = new Set();
       shuffleCards();
     }
 
     function shuffleCards() {
       remainingFlashcards.sort(() => Math.random() - 0.5);
       displayCard();
     }
 
     function resetProgress() {
       resetSession();
       displayCard();
     }
 
     function displayCard() {
       if (remainingFlashcards.length === 0) {
         document.getElementById("question").innerText = "üéâ Alle Fragen korrekt beantwortet!";
         document.getElementById("userInput").style.display = "none";
         document.getElementById("actionButton").style.display = "none";
         document.getElementById("selfAssessButtons").style.display = "none";
         document.getElementById("practiceContainer").style.display = "none";
         return;
       }
 
       currentCard = remainingFlashcards[Math.floor(Math.random() * remainingFlashcards.length)];
       document.getElementById("question").innerText = reverseMode ? currentCard.answer : currentCard.question;
       document.getElementById("phonetic").innerHTML = "";
       document.getElementById("phonetic").style.display = "none";
       document.getElementById("userInput").value = "";
       document.getElementById("userInput").style.display = mode === "typing" ? "inline-block" : "none";
       document.getElementById("userInput").disabled = false;
       document.getElementById("feedback").innerText = "";
       document.getElementById("correctAnswer").style.display = "none";
       document.getElementById("selfAssessButtons").style.display = "none";
       document.getElementById("practiceContainer").style.display = "none";
       document.getElementById("practiceTipField").value = "";
       document.getElementById("actionButton").innerText = "Check";
       document.getElementById("actionButton").style.display = mode === "overview" || mode === "lessons" ? "none" : "inline-block";
       lastActionWasCheck = false;
       updateProgress();
     }
 
     function updateProgress() {
       document.getElementById("progress").innerText = `Richtig: ${correctAnswersSet.size} / ${allFlashcards.length}`;
     }
 
     function handleAction() {
       if (mode === "typing") {
         if (!lastActionWasCheck) checkAnswer();
         else nextCard();
       } else if (mode === "self") {
         if (!lastActionWasCheck) showSelfAnswer();
       }
     }
 
     function checkAnswer() {
       const userInput = normalize(document.getElementById("userInput").value.replace(/\(.*?\)/g, ""));
       const correct = normalize((reverseMode ? currentCard.question : currentCard.answer).replace(/\(.*?\)/g, ""));
       const feedback = document.getElementById("feedback");
 
       if (userInput === correct) {
         correctAnswersSet.add(currentCard);
         remainingFlashcards = remainingFlashcards.filter(card => card !== currentCard);
         feedback.innerText = "‚úÖ Richtig!";
       } else {
         feedback.innerText = "‚ùå Falsch.";
       }
 
       document.getElementById("correctAnswer").innerText = "L√∂sung: " + (reverseMode ? currentCard.question : currentCard.answer);
       document.getElementById("correctAnswer").style.display = "block";
       document.getElementById("phonetic").innerHTML = renderPhonetic(currentCard.phonetic || "");
       document.getElementById("phonetic").style.display = "block";
       document.getElementById("userInput").disabled = true;
       document.getElementById("actionButton").innerText = "Next";
       lastActionWasCheck = true;
       updateProgress();
     }
 
     function showSelfAnswer() {
       const answer = reverseMode ? currentCard.question : currentCard.answer;
       document.getElementById("correctAnswer").innerText = "L√∂sung: " + answer;
       document.getElementById("correctAnswer").style.display = "block";
       document.getElementById("phonetic").innerHTML = renderPhonetic(currentCard.phonetic || "");
       document.getElementById("phonetic").style.display = "block";
       document.getElementById("selfAssessButtons").style.display = "flex";
       
       // Neu: Anzeigen des √úbungsfelds
       document.getElementById("practiceContainer").style.display = "block";
       
       document.getElementById("actionButton").style.display = "none";
       lastActionWasCheck = true;
     }
 
     function selfAssess(type) {
       if (type === "yes") {
         correctAnswersSet.add(currentCard);
         remainingFlashcards = remainingFlashcards.filter(card => card !== currentCard);
       }
       updateProgress();
       lastActionWasCheck = false;
       document.getElementById("actionButton").style.display = "inline-block";
       document.getElementById("practiceContainer").style.display = "none";
       nextCard();
     }
 
     function nextCard() {
       displayCard();
     }
 
     function toggleReverse() {
       reverseMode = !reverseMode;
       if (mode === "overview") {
         showOverview();
       } else {
         resetSession();
         displayCard();
       }
     }
 
     function loadSelectedDataset() {
       const value = document.getElementById("datasetSelect").value;
       if (value) {
         currentDataset = value;
         loadFlashcards(currentDataset);
       }
     }
 
     function populateDatasetDropdown() {
       const select = document.getElementById("datasetSelect");
       select.innerHTML = "";
       datasets.forEach(ds => {
         const opt = document.createElement("option");
         opt.value = ds.file;
         opt.textContent = ds.label;
         select.appendChild(opt);
       });
       if (datasets.length > 0) {
         select.selectedIndex = 0;
         currentDataset = datasets[0].file;
         loadFlashcards(currentDataset);
       }
     }
 
     function showOverview() {
       const datasetName = document.getElementById("datasetSelect").options[document.getElementById("datasetSelect").selectedIndex].text;
       document.getElementById("overviewTitle").innerText = `√úbersicht: ${datasetName} ${reverseMode ? '(Griechisch‚ÜíDeutsch)' : '(Deutsch‚ÜíGriechisch)'}`;
 
       const cardsContainer = document.getElementById("overviewCards");
       cardsContainer.innerHTML = "";
 
       allFlashcards.forEach(card => {
         const cardDiv = document.createElement("div");
         cardDiv.className = "overview-card";
 
         const question = document.createElement("div");
         question.className = "overview-question";
         question.innerText = reverseMode ? card.answer : card.question;
 
         const answer = document.createElement("div");
         answer.className = "overview-answer";
         answer.innerText = reverseMode ? card.question : card.answer;
 
         const phonetic = document.createElement("div");
         phonetic.className = "overview-phonetic";
         phonetic.innerHTML = renderPhonetic(card.phonetic || "");
 
         cardDiv.appendChild(question);
         cardDiv.appendChild(answer);
         cardDiv.appendChild(phonetic);
         cardsContainer.appendChild(cardDiv);
       });
     }
 
     document.addEventListener("DOMContentLoaded", () => {
       populateDatasetDropdown();
       // Lessons voraus laden
       loadLessons();
       
       document.getElementById("userInput").addEventListener("keyup", function(event) {
         if (event.key === "Enter" && mode === "typing") {
           if (!lastActionWasCheck) {
             checkAnswer();
           } else {
             nextCard();
           }
         }
       });
     });
   </script>
 </body>
 </html>
  font-size: 20px;
  line-height: 1.6;
}

select,
button {
  font-family: Georgia, serif;
  font-size: 1.1rem;
  padding: 0.6rem 1.2rem;
  border: 1px solid black;
  border-radius: 0;
  background-color: white;
  color: black;
  box-sizing: border-box;
  appearance: none;
  height: 2.8rem;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
}

select {
  background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1.41 0L6 4.58 10.59 0 12 1.41 6 7.41 0 1.41z' fill='black'/%3E%3C/svg%3E") no-repeat right 0.6rem center;
  background-size: 0.65rem auto;
  padding-right: 2rem;
}

button {
  cursor: pointer;
}

/* Box 1 ‚Äì Dropdowns oben */
#control-bar {
  display: flex;
  gap: 1rem;
  padding: 1.5rem 1rem;
  border: 1px solid black;
  border-bottom: 1px solid black;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
  align-items: center;
}

/* Box 2 ‚Äì Flashcard */
#flashcard {
  background: #ffffff;
  padding: 1.5rem 1rem;
  width: 100%;
  max-width: 100%;
  border: 1px solid black;
  border-top: none;
  text-align: left;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  box-sizing: border-box;
}

#question,
#correctAnswer,
.feedback,
#phonetic,
#userInput,
#practiceTipField,
.overview-question,
.overview-answer,
.overview-phonetic,
.lesson-title,
.lesson-content,
#practiceLabel,
#progress,
#actionButton {
  font-size: 1.25rem;
}

#phonetic {
  font-style: italic;
  display: none;
}

.feedback {
  font-weight: bold;
  min-height: 1.4rem;
  margin: 0;
  order: 3;
}

#userInput {
  width: 100%;
  background-color: #e6f0fb;
  border: none;
  padding: 1rem;
  font-family: Georgia, serif;
  box-sizing: border-box;
  margin: 0;
}

input::placeholder,
textarea::placeholder {
  font-family: Georgia, serif;
  font-size: 1.25rem;
  color: #666;
}

#check-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  margin: 0;
}

#actionButton {
  padding: 0.6rem 1.2rem;
  height: 2.8rem;
}

/* Box 3 ‚Äì Untere Buttons */
#bottom-buttons {
  display: flex;
  justify-content: center;
  gap: 1rem;
  flex-wrap: wrap;
  padding: 1.5rem 1rem;
  border: 1px solid black;
  border-top: none;
  background-color: white;
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

#bottom-buttons button {
  background: white;
  border: 1px solid black;
  padding: 0.6rem 1.2rem;
  font-size: 1.1rem;
  height: 2.8rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Zusatzbereiche */
#overviewContent,
#lessonsContent {
  display: none;
  background: white;
  border: 1px solid black;
  width: 100%;
  max-width: 800px;
  padding: 1.5rem;
  margin-top: 2rem;
  box-sizing: border-box;
}

.overview-card,
.lesson-item {
  border-bottom: 1px solid #000;
  padding: 1rem 0;
}

.overview-card:last-child,
.lesson-item:last-child {
  border-bottom: none;
}

.lesson-title::after {
  content: "\25BC";
  font-size: 0.8rem;
  transition: transform 0.3s ease;
}

.lesson-title.active::after {
  transform: rotate(180deg);
}

.lesson-content {
  display: none;
  background: #e6f0fb;
  padding: 1rem;
  margin-top: 0.5rem;
  white-space: pre-line;
  border: none;
  font-family: Georgia, serif;
  box-sizing: border-box;
}

#practiceContainer {
  display: none;
  margin-top: 1rem;
  width: 100%;
  max-width: 400px;
  box-sizing: border-box;
}

/* Icontext (Unicode) */
.icon-reverse::before {
  content: "\21C4";
}
.icon-shuffle::before {
  content: "\2738";
}
.icon-reset::before {
  content: "\25CB";
}

/* Fu√üzeile */
#version {
  margin-top: 2rem;
  font-size: 0.9rem;
  color: black;
  text-align: center;
}
